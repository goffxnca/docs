"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8813],{46888:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>h,contentTitle:()=>d,default:()=>f,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var t=n(85893),a=n(11151),i=n(71183),s=n(74866),c=n(85162);const l={id:"oracles",title:"Oracles"},d=void 0,o={id:"build/primitives/oracles",title:"Oracles",description:"Blockchain Oracles serve as intermediaries that connect smart contracts with external (off-chain) data.",source:"@site/../docs/2.build/5.primitives/oracles.md",sourceDirName:"2.build/5.primitives",slug:"/build/primitives/oracles",permalink:"/build/primitives/oracles",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/2.build/5.primitives/oracles.md",tags:[],version:"current",lastUpdatedBy:"Josh Ford",lastUpdatedAt:1732140592e3,frontMatter:{id:"oracles",title:"Oracles"},sidebar:"build",previous:{title:"Linkdrops",permalink:"/build/primitives/linkdrop"},next:{title:"Autonomous Organizations (DAO)",permalink:"/build/primitives/dao"}},h={},u=[{value:"Deployed Oracles on NEAR",id:"deployed-oracles-on-near",level:2},{value:"Price Oracle by NearDefi",id:"price-oracle-by-neardefi",level:2},{value:"Query Assets",id:"query-assets",level:3},{value:"Get Assets Price",id:"get-assets-price",level:3},{value:"Pyth Network Oracle",id:"pyth-network-oracle",level:2},{value:"Using Pyth Network Oracle",id:"using-pyth-network-oracle",level:2},{value:"Getting Started",id:"getting-started",level:3},{value:"<code>update_price_feeds</code>",id:"update_price_feeds",level:3},{value:"1) Fetching off-chain price feed",id:"1-fetching-off-chain-price-feed",level:4},{value:"2) Update Pyth Oracle Contract Price Feed",id:"2-update-pyth-oracle-contract-price-feed",level:4},{value:"<code>get_price</code>",id:"get_price",level:3}];function p(e){const r={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.a)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Blockchain_oracle",children:"Blockchain Oracles"})," serve as intermediaries that connect smart contracts with external (off-chain) data."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Example:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Price Feeds:"})," Real-time pricing for cryptocurrencies, stocks, or commodities."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Event Information:"})," Updates on real-world events like sports results or weather conditions."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"API Access:"})," Connections to external web services and systems."]}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsx)(r.p,{children:"Oracles, being external third-party services, require careful consideration of their reliability, security, and decentralization to avoid risks such as incorrect data, manipulation, or single points of failure."})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"deployed-oracles-on-near",children:"Deployed Oracles on NEAR"}),"\n",(0,t.jsx)(r.p,{children:"Here is a directory of third-party oracle services deployed on the NEAR blockchain:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Name"}),(0,t.jsx)(r.th,{children:"Creator"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#price-oracle",children:"Price Oracle"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"https://github.com/NearDeFi",children:"NearDefi"})}),(0,t.jsx)(r.td,{children:"Open source oracle for real-time asset pricing"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#pyth-network-oracle",children:"Pyth Network Oracle"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"https://pyth.network/",children:"Pyth Network"})}),(0,t.jsx)(r.td,{children:"High-frequency, low-latency oracle for price feeds"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.a,{href:"https://github.com/near/docs/edit/master/docs/2.build/5.primitives/oracles.md",children:"[Your Project Here]"})})}),(0,t.jsx)(r.td,{children:"-"}),(0,t.jsx)(r.td,{children:"-"})]})]})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"price-oracle-by-neardefi",children:"Price Oracle by NearDefi"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Creator:"})," ",(0,t.jsx)(r.a,{href:"https://github.com/NearDeFi",children:"NearDefi"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Codebase Repository:"})," ",(0,t.jsx)(r.a,{href:"https://github.com/NearDeFi/price-oracle",children:"NearDefi/price-oracle"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Bot for Data Feeds:"})," ",(0,t.jsx)(r.a,{href:"https://github.com/NearDeFi/near-price-oracle-bot",children:"NearDefi/near-price-oracle-bot"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Deployed Addresses:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Mainnet: ",(0,t.jsx)(r.a,{href:"https://nearblocks.io/address/priceoracle.near",children:"priceoracle.near"})]}),"\n",(0,t.jsxs)(r.li,{children:["Testnet: ",(0,t.jsx)(r.a,{href:"https://testnet.nearblocks.io/address/priceoracle.testnet",children:"priceoracle.testnet"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"query-assets",children:"Query Assets"}),"\n",(0,t.jsx)(s.Z,{children:(0,t.jsxs)(c.Z,{value:"\ud83d\udda5\ufe0f CLI",label:"\ud83d\udda5\ufe0f CLI",children:[(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"near view priceoracle.near get_assets\nnear contract call-function as-read-only priceoracle.near get_assets json-args {} network-config mainnet now\n"})}),(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Example Response"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:"[\n  [\n    'wrap.near',\n    {\n      reports: [\n        {\n          oracle_id: 'thorinoracle.near',\n          timestamp: '1669795900809627816',\n          price: { multiplier: '17030', decimals: 28 }\n        },\n        ...\n      ]\n    }\n  ]\n]\n"})})]})]})}),"\n",(0,t.jsx)(r.h3,{id:"get-assets-price",children:"Get Assets Price"}),"\n",(0,t.jsx)(s.Z,{children:(0,t.jsx)(c.Z,{value:"\ud83d\udda5\ufe0f CLI",label:"\ud83d\udda5\ufe0f CLI",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"near view priceoracle.near get_price_data\n"})})})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Example response"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:"{\n  timestamp: '1706631861981947371',\n  recency_duration_sec: 90,\n  prices: [\n    {\n      asset_id: 'wrap.near',\n      price: { multiplier: '30702', decimals: 28 }\n    },\n    {\n      asset_id: 'aurora',\n      price: { multiplier: '235662', decimals: 20 }\n    },\n    {\n      asset_id: 'meta-pool.near',\n      price: { multiplier: '38770', decimals: 28 }\n    },\n    {\n      asset_id: 'linear-protocol.near',\n      price: { multiplier: '36432', decimals: 28 }\n    },\n"})})]}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsxs)(r.p,{children:["For USD values, divide the ",(0,t.jsx)(r.code,{children:"multiplier"})," by ",(0,t.jsx)(r.code,{children:"10^4"}),"."]})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"pyth-network-oracle",children:"Pyth Network Oracle"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Creator:"})," ",(0,t.jsx)(r.a,{href:"https://pyth.network",children:"Pyth Network"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Official Documentation:"})," ",(0,t.jsx)(r.a,{href:"https://docs.pyth.network/price-feeds/use-real-time-data/near",children:"Pyth NEAR Docs"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Codebase Repository:"})," ",(0,t.jsx)(r.a,{href:"https://github.com/pyth-network/pyth-crosschain/tree/main/target_chains/near",children:"pyth-network/pyth-crosschain"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Deployed Addresses:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Mainnet:"})," ",(0,t.jsx)(r.a,{href:"https://nearblocks.io/address/pyth-oracle.near",children:"pyth-oracle.near"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Testnet:"})," ",(0,t.jsx)(r.a,{href:"https://testnet.nearblocks.io/address/pyth-oracle.testnet",children:"pyth-oracle.testnet"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"using-pyth-network-oracle",children:"Using Pyth Network Oracle"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"Pyth Network's NEAR smart contract has two core methods to update & get price feeds of your choice."}),"\n"]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"#update_price_feeds",children:(0,t.jsx)(r.code,{children:"update_price_feeds"})}),"\n",(0,t.jsx)(r.em,{children:"(updates Pyth smart contract with the price feed you provide)"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["args: ",(0,t.jsx)(r.code,{children:"data"})]}),"\n",(0,t.jsxs)(r.li,{children:["type: ",(0,t.jsx)(r.code,{children:"object"})]}),"\n",(0,t.jsxs)(r.li,{children:["example: ",(0,t.jsx)(r.code,{children:'{ "data": "504e41...\' }'})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"#get_price",children:(0,t.jsx)(r.code,{children:"get_price"})})," (fetches the most recent price stored in the contract)_","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["args: ",(0,t.jsx)(r.code,{children:"price_identifer"})]}),"\n",(0,t.jsxs)(r.li,{children:["type: ",(0,t.jsx)(r.code,{children:"object"})]}),"\n",(0,t.jsxs)(r.li,{children:["example: ",(0,t.jsx)(r.code,{children:"{ price_identifier: 'f9c0172ba10dfa8...' }"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.p,{children:["For a complete list of endpoints to interact with, see ",(0,t.jsxs)(r.a,{href:"https://github.com/pyth-network/pyth-crosschain/blob/main/target_chains/near/receiver/src/ext.rs",children:["Pyth's ",(0,t.jsx)(r.code,{children:"receiver"})," contract"]}),"."]})}),"\n",(0,t.jsx)(r.h3,{id:"getting-started",children:"Getting Started"}),"\n",(0,t.jsx)(r.p,{children:"To get started with Pyth oracle you will need to gather the following information which differ between networks:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Price ID(s)"}),"\n",(0,t.jsx)(r.li,{children:"HermesAPI Endpoint"}),"\n",(0,t.jsx)(r.li,{children:"Smart contract address"}),"\n"]}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Network"}),(0,t.jsx)(r.th,{children:"Price Feed IDs"}),(0,t.jsx)(r.th,{children:"Hermes API Address"}),(0,t.jsx)(r.th,{children:"Contract Address"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"testnet"})}),(0,t.jsx)(r.td,{children:(0,t.jsxs)(r.a,{href:"https://www.pyth.network/developers/price-feed-ids#near-testnet",children:["NEAR ",(0,t.jsx)(r.code,{children:"testnet"})," Price Feed IDs"]})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"hermes-beta.pyth.network"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"https://testnet.nearblocks.io/address/pyth-oracle.testnet",children:"pyth-oracle.testnet"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"mainnet"})}),(0,t.jsx)(r.td,{children:(0,t.jsxs)(r.a,{href:"https://www.pyth.network/developers/price-feed-ids#near-mainnet",children:["NEAR ",(0,t.jsx)(r.code,{children:"mainnet"})," Price Feed IDs"]})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"hermes.pyth.network"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"https://nearblocks.io/address/pyth-oracle.near",children:"pyth-oracle.near"})})]})]})]}),"\n",(0,t.jsxs)(r.admonition,{type:"info",children:[(0,t.jsxs)(r.p,{children:["When using Price Feed IDs, you will need to remove the ",(0,t.jsx)(r.code,{children:"0x"})," prefix."]}),(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Price Feed ID Example (testnet):"})}),(0,t.jsx)(i.Ey,{language:"typescript",url:"https://github.com/near-examples/near-js/blob/main/node-js/oracle-example/pyth-oracle-update.js",start:"14",end:"15"})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"update_price_feeds",children:(0,t.jsx)(r.code,{children:"update_price_feeds"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"Updates the Pyth Oracle contract data with the price feed you provide."}),"\n"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["args: ",(0,t.jsx)(r.code,{children:"data"})," ",(0,t.jsx)(r.em,{children:"(off-chain hex-encoded price feed)"})]}),"\n",(0,t.jsxs)(r.li,{children:["type: ",(0,t.jsx)(r.code,{children:"object"})]}),"\n",(0,t.jsxs)(r.li,{children:["example: ",(0,t.jsx)(r.code,{children:'{ "data": "504e41...\' }'})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Update the Pyth Oracle contract with new price feed data in two main steps:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#1-fetching-off-chain-price-feed",children:"Fetch off-chain price feed"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"#2-update-pyth-oracle-contract-price-feed",children:"Update Pyth Oracle contract with off-chain price feed"})}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"1-fetching-off-chain-price-feed",children:"1) Fetching off-chain price feed"}),"\n",(0,t.jsxs)(r.p,{children:["You can obtain an off-chain price feed using Pyth's ",(0,t.jsx)(r.a,{href:"https://hermes-beta.pyth.network/docs/",children:"Hermes API"}),"."]}),"\n",(0,t.jsxs)(r.p,{children:["To use these endpoints, you will need to provide a Price Feed ID and ensure you are targeting the correct network. See ",(0,t.jsx)(r.a,{href:"#getting-started",children:"Getting Started"})," for more information."]}),"\n",(0,t.jsxs)(r.p,{children:["Here is a node.js example of fetching the latest price feed using ",(0,t.jsx)(r.code,{children:"/v2/updates/price/latest"})," endpoint:"]}),"\n",(0,t.jsx)(i.SQ,{value:"js",language:"js",children:(0,t.jsx)(i.Ey,{url:"https://github.com/near-examples/near-js/blob/main/node-js/utils/fetch-hermes-price-data.js"})}),"\n",(0,t.jsx)(r.h4,{id:"2-update-pyth-oracle-contract-price-feed",children:"2) Update Pyth Oracle Contract Price Feed"}),"\n",(0,t.jsxs)(r.p,{children:["After ",(0,t.jsx)(r.a,{href:"#1-fetching-off-chain-price-feed",children:"fetching an off-chain price feed"}),", you can now perform a contract call to the Pyth Oracle to update the price feed on-chain."]}),"\n",(0,t.jsxs)(r.p,{children:["Call ",(0,t.jsx)(r.code,{children:"update_price_feeds"})," on the Pyth Oracle contract with ",(0,t.jsx)(r.code,{children:"data"})," as your arguments."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"example args:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "data": "504e41550100000000a00100000000010070b0ee3a00d1a3c07ee440887eb34a5a35860e6f4b9230fd62f0593fe35c8a3561735a6a37d269c5f166b84ead8918f710dc1be2ee6b51db5b22340ea2c173fc01673d544b00000000001ae101faedac5851e32b9b23b5f9411a8c2bac4aae3ed4dd7b811dd1a72ea4aa7100000000061bc18c014155575600000000000ab0f04600002710f41bc8c224ed983c68dbf5dab7dd34c9129fecfa03005500ca80ba6dc32e08d06f1aa886011eed1d77c77be9eb761cc10d72b7d0a2fd57a600000047e2eb4ef0000000000692480ffffffff800000000673d544b00000000673d544b00000048200e66a00000000005e495a60bb9370c458dd50558b34699b5b179f45e56be22f0a1a0feb1db8469adc8c5efeb53988495bac07bf9efed07f5eee43818150c55055882f6872a228e8e9bc78459ed3ea7fe0b86f3048f6bf0aad34befc46063ab7d200beb8bc9fe5839844d2233546f0742bb665f1e610370fcf8ce5be83d0f47e584b685af87cf3ebcb79e714827dcb99dba579e1a03785052ab3c7c7147d3f7bba822b04dbda159670e9a8d29e7ccf68474b2ca85e00224d29bf65b06b09f95e91703313e053b697b48ac1e4d1c57605a71ab77e7ef276bfe8a369c268333b9a37461bf2b7cb7fd4c005500ecf553770d9b10965f8fb64771e93f5690a182edc32be4a3236e0caaa6e0581a0000000e2ba8cd280000000001b40517fffffff800000000673d544b00000000673d544b0000000e3ea44c6800000000016aee120b47b853f55949284cb8ba0b63824ff9b48cd1da8417f45421b79ee3195fc8d107540a0bbb95c2445b66065754f135cb842db09a7e7ab33f79c546a48db872bd7197b04e3d7b52fbb55b3b9f51707c5a55fac3707cb563dbcde4aadeecc3649c237454cecf519dc567c0da03d81808523aa4fa71815eab25ce7da61b48647bac645d403208135002aab5fde2d7ab3c7c7147d3f7bba822b04dbda159670e9a8d29e7ccf68474b2ca85e00224d29bf65b06b09f95e91703313e053b697b48ac1e4d1c57605a71ab77e7ef276bfe8a369c268333b9a37461bf2b7cb7fd4c"\n}\n'})}),"\n",(0,t.jsxs)(r.p,{children:["Example of updating the Pyth Oracle contract's price feed using ",(0,t.jsx)(r.code,{children:"near-js/client"})," and node.js:"]}),"\n",(0,t.jsxs)(i.SQ,{value:"js",language:"js",children:[(0,t.jsx)(i.Ey,{fname:"updatePythContract",url:"https://github.com/near-examples/near-js/blob/main/node-js/oracle-example/pyth-oracle-update.js"}),(0,t.jsx)(i.Ey,{fname:"getHermesPriceData",url:"https://github.com/near-examples/near-js/blob/main/node-js/utils/fetch-hermes-price-data.js"}),(0,t.jsx)(i.Ey,{fname:"nearConnect",url:"https://github.com/near-examples/near-js/blob/main/node-js/utils/connect.js"})]}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.p,{children:["Although unused deposit will be refunded, you can calculate an estimate by calling the ",(0,t.jsx)(r.code,{children:"get_update_fee_estimate"})," method against the Pyth contract."]})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"get_price",children:(0,t.jsx)(r.code,{children:"get_price"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"Fetches the most recent price feed stored in the Pyth Oracle contract. Is a view method, so does not require a signature or payment."}),"\n"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["args: ",(0,t.jsx)(r.code,{children:"price_identifier"})," ",(0,t.jsxs)(r.em,{children:["(unique ",(0,t.jsx)(r.a,{href:"#environment-variables",children:"price feed identifier"}),")"]})]}),"\n",(0,t.jsxs)(r.li,{children:["type: ",(0,t.jsx)(r.code,{children:"object"})]}),"\n",(0,t.jsxs)(r.li,{children:["example: ",(0,t.jsx)(r.code,{children:"{ price_identifier: 'f9c0172ba10dfa8...' }"})]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["After ",(0,t.jsx)(r.a,{href:"#update_price_feeds",children:"updating the price feed"}),", you can view the feed on-chain by calling ",(0,t.jsx)(r.code,{children:"get_price"})," on the Pyth Oracle contract. Note that this is a view method and does not require a signature or deposit."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Example:"})}),"\n",(0,t.jsx)(i.SQ,{value:"js",language:"js",children:(0,t.jsx)(i.Ey,{url:"https://github.com/near-examples/near-js/blob/main/node-js/oracle-example/pyth-oracle-view.js"})})]})}function f(e={}){const{wrapper:r}={...(0,a.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},85162:(e,r,n)=>{n.d(r,{Z:()=>s});n(67294);var t=n(36905);const a={tabItem:"tabItem_Ymn6"};var i=n(85893);function s(e){var r=e.children,n=e.hidden,s=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.Z)(a.tabItem,s),hidden:n,children:r})}},74866:(e,r,n)=>{n.d(r,{Z:()=>w});var t=n(67294),a=n(36905),i=n(12466),s=n(16550),c=n(20469),l=n(91980),d=n(67392),o=n(20812);function h(e){var r,n;return null!=(r=null==(n=t.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,t.isValidElement)(e)&&((r=e.props)&&"object"==typeof r&&"value"in r))return e;var r;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?r:[]}function u(e){var r=e.values,n=e.children;return(0,t.useMemo)((function(){var e=null!=r?r:function(e){return h(e).map((function(e){var r=e.props;return{value:r.value,label:r.label,attributes:r.attributes,default:r.default}}))}(n);return function(e){var r=(0,d.lx)(e,(function(e,r){return e.value===r.value}));if(r.length>0)throw new Error('Docusaurus error: Duplicate values "'+r.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[r,n])}function p(e){var r=e.value;return e.tabValues.some((function(e){return e.value===r}))}function f(e){var r=e.queryString,n=void 0!==r&&r,a=e.groupId,i=(0,s.k6)(),c=function(e){var r=e.queryString,n=void 0!==r&&r,t=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:n,groupId:a});return[(0,l._X)(c),(0,t.useCallback)((function(e){if(c){var r=new URLSearchParams(i.location.search);r.set(c,e),i.replace(Object.assign({},i.location,{search:r.toString()}))}}),[c,i])]}function x(e){var r,n,a,i,s=e.defaultValue,l=e.queryString,d=void 0!==l&&l,h=e.groupId,x=u(e),j=(0,t.useState)((function(){return function(e){var r,n=e.defaultValue,t=e.tabValues;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+t.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var a=null!=(r=t.find((function(e){return e.default})))?r:t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:s,tabValues:x})})),b=j[0],m=j[1],g=f({queryString:d,groupId:h}),v=g[0],y=g[1],w=(r=function(e){return e?"docusaurus.tab."+e:null}({groupId:h}.groupId),n=(0,o.Nk)(r),a=n[0],i=n[1],[a,(0,t.useCallback)((function(e){r&&i.set(e)}),[r,i])]),k=w[0],_=w[1],N=function(){var e=null!=v?v:k;return p({value:e,tabValues:x})?e:null}();return(0,c.Z)((function(){N&&m(N)}),[N]),{selectedValue:b,selectValue:(0,t.useCallback)((function(e){if(!p({value:e,tabValues:x}))throw new Error("Can't select invalid tab value="+e);m(e),y(e),_(e)}),[y,_,x]),tabValues:x}}var j=n(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=n(85893);function g(e){var r=e.className,n=e.block,t=e.selectedValue,s=e.selectValue,c=e.tabValues,l=[],d=(0,i.o5)().blockElementScrollPositionUntilNextRender,o=function(e){var r=e.currentTarget,n=l.indexOf(r),a=c[n].value;a!==t&&(d(r),s(a))},h=function(e){var r,n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":var t,a=l.indexOf(e.currentTarget)+1;n=null!=(t=l[a])?t:l[0];break;case"ArrowLeft":var i,s=l.indexOf(e.currentTarget)-1;n=null!=(i=l[s])?i:l[l.length-1]}null==(r=n)||r.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},r),children:c.map((function(e){var r=e.value,n=e.label,i=e.attributes;return(0,m.jsx)("li",Object.assign({role:"tab",tabIndex:t===r?0:-1,"aria-selected":t===r,ref:function(e){return l.push(e)},onKeyDown:h,onClick:o},i,{className:(0,a.Z)("tabs__item",b.tabItem,null==i?void 0:i.className,{"tabs__item--active":t===r}),children:null!=n?n:r}),r)}))})}function v(e){var r=e.lazy,n=e.children,i=e.selectedValue,s=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){var c=s.find((function(e){return e.props.value===i}));return c?(0,t.cloneElement)(c,{className:(0,a.Z)("margin-top--md",c.props.className)}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:s.map((function(e,r){return(0,t.cloneElement)(e,{key:r,hidden:e.props.value!==i})}))})}function y(e){var r=x(e);return(0,m.jsxs)("div",{className:(0,a.Z)("tabs-container",b.tabList),children:[(0,m.jsx)(g,Object.assign({},r,e)),(0,m.jsx)(v,Object.assign({},r,e))]})}function w(e){var r=(0,j.Z)();return(0,m.jsx)(y,Object.assign({},e,{children:h(e.children)}),String(r))}},71183:(e,r,n)=>{n.d(r,{O2:()=>f,Ey:()=>j,SQ:()=>x});var t=n(67294),a=n(74866),i=n(85162),s=n(74165),c=n(15861),l=n(1841),d=n.n(l),o=n(85893);function h(){return(h=(0,c.Z)((0,s.Z)().mark((function e(r,n,t){var a,i,c,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=localStorage.getItem(r+"-until"))&&i>Date.now())){e.next=5;break}a=localStorage.getItem(r),e.next=18;break;case 5:return e.prev=5,e.next=8,fetch(r);case 8:return e.next=10,e.sent.text();case 10:a=e.sent,localStorage.setItem(r,a),localStorage.setItem(r+"-until",Date.now()+6e4),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return","Error fetching code, please try reloading");case 18:return c=a.split("\n"),n=n?Number(n)-1:0,t=t?Number(t):c.length,c=c.slice(n,t),l=c.reduce((function(e,r){if(0===r.length)return e;var n=r.match(/^\s+/);return n?Math.min(e,n[0].length):0}),1/0),e.abrupt("return",c.map((function(e){return e.slice(l)})).join("\n"));case 24:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}const u=function(e){var r=e.url,n=e.start,a=e.end,i=e.language,s=e.fname,c=e.metastring,l=(0,t.useState)("Loading..."),u=l[0],p=l[1];return(0,t.useEffect)((function(){var e=function(e){var r=e.slice(e.indexOf("https")).split("#"),n=r[0],t=(r[1],new URL(n).pathname.split("/").slice(1)),a=t[0],i=t[1];return t[2],"https://raw.githubusercontent.com/"+a+"/"+i+"/"+t[3]+"/"+t.slice(4).join("/")}(r),t=function(e,r,n){return h.apply(this,arguments)}(e,n,a);t.then((function(e){return p(e)}))})),(0,o.jsxs)("div",{fname:s,children:[(0,o.jsx)(d(),{language:i,metastring:c+" showLineNumbers",children:u}),(0,o.jsx)("div",{style:{fontSize:"0.9em",fontWeight:600,color:"rgb(14, 117, 221)",textAlign:"center",paddingBottom:"13px",textDecoration:"underline"},children:(0,o.jsx)("a",{href:r,target:"_blank",rel:"noreferrer noopener",children:"See full example on GitHub"})})]})};var p={rust:"\ud83e\udd80 Rust",js:"\ud83c\udf10 Javascript",ts:"\ud83c\udf10 Typescript"};function f(e){var r=e.children;return Array.isArray(r)||(r=[r]),(0,o.jsx)(a.Z,{className:"language-tabs",groupId:"code-tabs",children:r.map((function(e,r){return(0,o.jsx)(i.Z,{value:e.props.value,label:p[e.props.value],children:e})}))})}function x(e){var r=e.children,n=e.language,t=e.showSingleFName;return Array.isArray(r)||(r=[r]),r=r.map((function(e){return function(e,r){var n=e.props,t=(n.children,n.url),a=n.start,i=n.end,s=n.fname;if(e.type===j)return j({url:t,start:a,end:i,language:r,fname:s});return e}(e,n)})),1!=r.length||t?(0,o.jsx)(a.Z,{className:"file-tabs",children:r.map((function(e,r){return(0,o.jsx)(i.Z,{value:r,label:e.props.fname,children:e})}))}):(0,o.jsx)(i.Z,{value:0,label:r[0].props.fname,children:r[0]})}function j(e){var r=e.url,n=e.start,t=e.end,a=e.language,i=e.fname,s=e.metastring;return u({url:r,start:n,end:t,language:a,fname:i,metastring:s})}}}]);