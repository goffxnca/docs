"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1443],{98594:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var a=n(85893),r=n(11151),i=(n(74866),n(85162),n(71183));const s={id:"creating-a-frontend",title:"Creating a Frontend"},o=void 0,l={id:"tutorials/auction/creating-a-frontend",title:"Creating a Frontend",description:"Now that we have successfully created a contract, it's time to build a frontend to provide a user-friendly interface for interacting with it. Up until now, we have been using the CLI to send transactions and view the contract's state. However, frontends offer a more intuitive way for end users to interact with the contract. They can display all the relevant information in one place, allow users to make calls with a simple button click, and only require a wallet as a prerequisite.",source:"@site/../docs/3.tutorials/auction/2.1-frontend.md",sourceDirName:"3.tutorials/auction",slug:"/tutorials/auction/creating-a-frontend",permalink:"/docs/tutorials/auction/creating-a-frontend",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/auction/2.1-frontend.md",tags:[],version:"current",lastUpdatedBy:"Owen",lastUpdatedAt:1728641473e3,frontMatter:{id:"creating-a-frontend",title:"Creating a Frontend"},sidebar:"tutorials",previous:{title:"Deploying to Testnet",permalink:"/docs/tutorials/auction/deploy"},next:{title:"Indexing Historical Data",permalink:"/docs/tutorials/auction/indexing-historical-data"}},c={},d=[{value:"Frontend structure",id:"frontend-structure",level:2},{value:"Specifying the contract",id:"specifying-the-contract",level:2},{value:"Setting up wallets",id:"setting-up-wallets",level:2},{value:"Displaying the highest bid",id:"displaying-the-highest-bid",level:2},{value:"Updating the highest bid",id:"updating-the-highest-bid",level:2},{value:"Auction end time",id:"auction-end-time",level:2},{value:"Making a bid",id:"making-a-bid",level:2},{value:"Claiming the auction",id:"claiming-the-auction",level:2},{value:"Conclusion",id:"conclusion",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Now that we have successfully created a contract, it's time to build a frontend to provide a user-friendly interface for interacting with it. Up until now, we have been using the CLI to send transactions and view the contract's state. However, frontends offer a more intuitive way for end users to interact with the contract. They can display all the relevant information in one place, allow users to make calls with a simple button click, and only require a wallet as a prerequisite."}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"frontend-structure",children:"Frontend structure"}),"\n",(0,a.jsx)(t.p,{children:"Navigate to the auction frontend."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"cd frotends/01-frontend\n"})}),"\n",(0,a.jsx)(t.p,{children:"Here we have a simple Next.js frontend that we'll walk through to understand the basics of creating a frontend for a NEAR smart contract."}),"\n",(0,a.jsx)(t.p,{children:"For starters, let's take a look at how the code in the frontend is structured by doing a quick overview of the important files."}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"File"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"_app.js"})}),(0,a.jsx)(t.td,{children:"Responsible for rending the page, initiates the wallet object and adds it to global context"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"index.js"})}),(0,a.jsx)(t.td,{children:"The main page where the project's components are loaded into and contains most of the logic for the application like viewing the state of the contract and logic for placing a bid"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"near.js"})}),(0,a.jsx)(t.td,{children:"Contains the wallet class that has methods to interact with the wallet and blockchain"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"context.js"})}),(0,a.jsx)(t.td,{children:"Holds the global context - the wallet object and the signed-in account ID - that can be accessed anywhere"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"config.js"})}),(0,a.jsx)(t.td,{children:"Specifies the account ID of the auction contract"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Navigation.jsx"})}),(0,a.jsx)(t.td,{children:"A component that contains a button to sign users in and out of wallets"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Bid.jsx"})}),(0,a.jsx)(t.td,{children:"A component allowing a user to make a bid"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"LastBid.jsx"})}),(0,a.jsx)(t.td,{children:"A component that displays the highest bid and when the highest bid will next refresh"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Timer.jsx"})}),(0,a.jsx)(t.td,{children:"A component that shows how long till the auction is over, or, if over, displays a button to claim the auction and then states the auction is over"})]})]})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"specifying-the-contract",children:"Specifying the contract"}),"\n",(0,a.jsx)(t.p,{children:"We have a config file that specifies the contract name of the auction that the frontend will interact with. There has been an example auction contract deployed and specified already but feel free to change the contract to your own auction contract you deployed."}),"\n",(0,a.jsx)(i.SQ,{value:"javascript",language:"javascript",showSingleFName:!0,children:(0,a.jsx)(i.Ey,{fname:"config.js",url:"https://github.com/near-examples/auctions-tutorial/tree/reorg-auction/frontends/01-frontend/src/config.js"})}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"setting-up-wallets",children:"Setting up wallets"}),"\n",(0,a.jsxs)(t.p,{children:["To be able to fully interact with the contract - send bids and claim the auction - you'll need a ",(0,a.jsx)(t.code,{children:"wallet"})," to sign transactions. Wallets securely store your private keys and allow you to sign transactions without exposing your private key to the frontend. The wallet selector allows users to choose between a selection of wallets."]}),"\n",(0,a.jsxs)(t.p,{children:["We abstract the wallet selector in our ",(0,a.jsx)(t.code,{children:"near.js"})," file by exposing methods to complete various tasks. Feel free to ",(0,a.jsx)(t.a,{href:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/wallets/near.js",children:"explore the file"})," to understand fully how the wallet selector is implemented."]}),"\n",(0,a.jsxs)(t.p,{children:["The wallet object is initiated in the ",(0,a.jsx)(t.code,{children:"app.js"})," file and its added to the global context along with the account that is signed in to make it easier to access anywhere in the application."]}),"\n",(0,a.jsxs)(i.SQ,{value:"javascript",language:"javascript",children:[(0,a.jsx)(i.Ey,{fname:"_app.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/pages/_app.js#L13-L27",start:"13",end:"27"}),(0,a.jsx)(i.Ey,{fname:"context.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/context.js"})]}),"\n",(0,a.jsxs)(t.admonition,{title:"Access keys",type:"tip",children:[(0,a.jsxs)(t.p,{children:["On NEAR, in additional to normal full access keys, we have ",(0,a.jsx)(t.code,{children:"function-call access keys"})," that are given to applications to allow them to sign ",(0,a.jsx)(t.code,{children:"non-payable"})," transactions on behalf of the user. This is so the wallet doesn't have to pop up for each non-critical transaction, improving the user experience. When creating the wallet object you can decide to create an access key for the application to use. However, in this example we opt out since the main function - ",(0,a.jsx)(t.code,{children:"bid"})," - we'll be calling is ",(0,a.jsx)(t.code,{children:"payable"}),"."]}),(0,a.jsxs)(t.p,{children:["You can read further about NEAR's key model ",(0,a.jsx)(t.a,{href:"/docs/concepts/protocol/access-keys",children:"here"}),"."]})]}),"\n",(0,a.jsxs)(t.p,{children:["We add a sign-in and sign-out button in the ",(0,a.jsx)(t.code,{children:"navigation"})," component to call the respective methods in the ",(0,a.jsx)(t.code,{children:"near.js"})," file."]}),"\n",(0,a.jsxs)(i.SQ,{value:"javascript",language:"javascript",children:[(0,a.jsx)(i.Ey,{fname:"Navigation.jsx",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/components/Navigation.jsx"}),(0,a.jsx)(i.Ey,{fname:"near.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/wallets/near.js#L58-L72",start:"58",end:"72"})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"displaying-the-highest-bid",children:"Displaying the highest bid"}),"\n",(0,a.jsxs)(t.p,{children:["To get the highest bid from the auction and who made it we call ",(0,a.jsx)(t.code,{children:"get_highest_bid"}),". Since this function returns the highest bid in ",(0,a.jsx)(t.code,{children:"yoctoNEAR"})," we divide by ",(0,a.jsx)(t.code,{children:"10^24"})," to get the amount in NEAR."]}),"\n",(0,a.jsxs)(i.SQ,{value:"javascript",language:"javascript",children:[(0,a.jsx)(i.Ey,{fname:"index.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/pages/index.js#L24-L29",start:"24",end:"29"}),(0,a.jsx)(i.Ey,{fname:"near.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/wallets/near.js#L82-L94",start:"82",end:"94"})]}),"\n",(0,a.jsxs)(t.p,{children:["In the wallet file, you'll see that we make a query to the RPC provider, since we are not signing a transaction the wallet isn't required here. Here we are using ",(0,a.jsx)(t.a,{href:"https://rpc.testnet.near.org",children:"https://rpc.testnet.near.org"})," but note there are ",(0,a.jsx)(t.a,{href:"/docs/api/rpc/providers",children:"many different providers available"}),". We are querying the RPC with optimistic finality, which queries the latest block recorded on the node. Alternatively, one could use final finality where the block has been validated by at least 66% of the validators on the network but this will provide slightly delayed information (only by a couple of seconds)."]}),"\n",(0,a.jsxs)(t.p,{children:["We then pass the information about the highest bidder into the ",(0,a.jsx)(t.code,{children:"LastBid"})," component to display the bid amount and the bidder's account Id."]}),"\n",(0,a.jsxs)(i.SQ,{value:"javascript",language:"javascript",children:[(0,a.jsx)(i.Ey,{fname:"index.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/pages/index.js#L101",start:"101",end:"101"}),(0,a.jsx)(i.Ey,{fname:"LastBid.jsx",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/components/LastBid.jsx"})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"updating-the-highest-bid",children:"Updating the highest bid"}),"\n",(0,a.jsxs)(t.p,{children:["We want to know the highest bid at all times, someone else could have placed a higher bid since the page was loaded. To solve this we fetch the contract information every 20 seconds using ",(0,a.jsx)(t.code,{children:"setInterval"})," and update the highest bid if it has changed. In reality you would want to refresh the bid amount more requently but for the sake of saving on RPC calls we are doing it every 20 seconds."]}),"\n",(0,a.jsx)(i.SQ,{value:"javascript",language:"javascript",showSingleFName:!0,children:(0,a.jsx)(i.Ey,{fname:"index.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/pages/index.js#L47-L60",start:"47",end:"60"})}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"auction-end-time",children:"Auction end time"}),"\n",(0,a.jsx)(t.p,{children:"The contract stores the end time of the auction in the number of nanoseconds since the Unix epoch (1 January 1970 00:00:00 UTC). In our frontend we will display the time left in days, hours, minutes, and seconds."}),"\n",(0,a.jsx)(i.SQ,{value:"javascript",language:"javascript",showSingleFName:!0,children:(0,a.jsx)(i.Ey,{fname:"Timer.jsx",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/components/Timer.jsx#L11-L35",start:"11",end:"35"})}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"making-a-bid",children:"Making a bid"}),"\n",(0,a.jsxs)(t.p,{children:["To make a bid we make a call to the contract using the ",(0,a.jsx)(t.code,{children:"bid"})," function. We specify the deposit amount in ",(0,a.jsx)(t.code,{children:"yoctoNEAR"})," which will be the bid amount. The input box will take the bid amount in NEAR so we multiply by ",(0,a.jsx)(t.code,{children:"10^24"})," to get the correct amount to send. We also specify the amount of gas to attach to the transaction, here we are attaching 30Tgas which is more than enough for the transaction to go through, we are refunded any unused gas anyway."]}),"\n",(0,a.jsx)(t.p,{children:"Here, since the user is changing the state of the contract, not just viewing it, the user needs to sign the transaction. Thus the wallet will pop up displaying the transaction details."}),"\n",(0,a.jsxs)(i.SQ,{value:"javascript",language:"javascript",children:[(0,a.jsx)(i.Ey,{fname:"index.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/pages/index.js#L95-L105",start:"95",end:"105"}),(0,a.jsx)(i.Ey,{fname:"near.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/wallets/near.js#L107-L126",start:"107",end:"126"})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"claiming-the-auction",children:"Claiming the auction"}),"\n",(0,a.jsxs)(t.p,{children:["Once the auction is over (the current time is greater than the end time) the auction can be claimed. At this point, the timer will be hidden and a button to claim the auction will be displayed. Once clicked the ",(0,a.jsx)(t.code,{children:"claim"})," function will be called on the auction contract to send the highest bidder the NFT and the auctioneer the FTs."]}),"\n",(0,a.jsx)(i.SQ,{value:"javascript",language:"javascript",showSingleFName:!0,children:(0,a.jsx)(i.Ey,{fname:"index.js",url:"https://github.com/near-examples/auctions-tutorial/blob/main/frontends/01-frontend/src/pages/index.js#L75-L82",start:"75",end:"82"})}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,a.jsx)(t.p,{children:"In this part of the tutorial, we have implemented a simple frontend for a NEAR contract. Along the way, you have learned how to use the wallet selector to sign the user in and out, how to view the contract\u2019s state, how to sign and send transactions."}),"\n",(0,a.jsxs)(t.p,{children:["While we can see the highest bid, we may want to see the auction's bidding history. Since the contract only stores the most recent bid (to reduce storage costs), we need to use an indexer to pull historical data. In the ",(0,a.jsx)(t.a,{href:"/docs/tutorials/auction/indexing-historical-data",children:"next part"})," of the tutorial, we'll look at querying historical data using an API endpoint."]})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},85162:(e,t,n)=>{n.d(t,{Z:()=>s});n(67294);var a=n(36905);const r={tabItem:"tabItem_Ymn6"};var i=n(85893);function s(e){var t=e.children,n=e.hidden,s=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,s),hidden:n,children:t})}},74866:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(67294),r=n(36905),i=n(12466),s=n(16550),o=n(20469),l=n(91980),c=n(67392),d=n(20812);function u(e){var t,n;return null!=(t=null==(n=a.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,a.isValidElement)(e)&&((t=e.props)&&"object"==typeof t&&"value"in t))return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function h(e){var t=e.values,n=e.children;return(0,a.useMemo)((function(){var e=null!=t?t:function(e){return u(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}(n);return function(e){var t=(0,c.lx)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function p(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function f(e){var t=e.queryString,n=void 0!==t&&t,r=e.groupId,i=(0,s.k6)(),o=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:r});return[(0,l._X)(o),(0,a.useCallback)((function(e){if(o){var t=new URLSearchParams(i.location.search);t.set(o,e),i.replace(Object.assign({},i.location,{search:t.toString()}))}}),[o,i])]}function g(e){var t,n,r,i,s=e.defaultValue,l=e.queryString,c=void 0!==l&&l,u=e.groupId,g=h(e),m=(0,a.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:s,tabValues:g})})),x=m[0],j=m[1],b=f({queryString:c,groupId:u}),v=b[0],w=b[1],y=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:u}.groupId),n=(0,d.Nk)(t),r=n[0],i=n[1],[r,(0,a.useCallback)((function(e){t&&i.set(e)}),[t,i])]),k=y[0],N=y[1],S=function(){var e=null!=v?v:k;return p({value:e,tabValues:g})?e:null}();return(0,o.Z)((function(){S&&j(S)}),[S]),{selectedValue:x,selectValue:(0,a.useCallback)((function(e){if(!p({value:e,tabValues:g}))throw new Error("Can't select invalid tab value="+e);j(e),w(e),N(e)}),[w,N,g]),tabValues:g}}var m=n(72389);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(85893);function b(e){var t=e.className,n=e.block,a=e.selectedValue,s=e.selectValue,o=e.tabValues,l=[],c=(0,i.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,n=l.indexOf(t),r=o[n].value;r!==a&&(c(t),s(r))},u=function(e){var t,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,r=l.indexOf(e.currentTarget)+1;n=null!=(a=l[r])?a:l[0];break;case"ArrowLeft":var i,s=l.indexOf(e.currentTarget)-1;n=null!=(i=l[s])?i:l[l.length-1]}null==(t=n)||t.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t),children:o.map((function(e){var t=e.value,n=e.label,i=e.attributes;return(0,j.jsx)("li",Object.assign({role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:function(e){return l.push(e)},onKeyDown:u,onClick:d},i,{className:(0,r.Z)("tabs__item",x.tabItem,null==i?void 0:i.className,{"tabs__item--active":a===t}),children:null!=n?n:t}),t)}))})}function v(e){var t=e.lazy,n=e.children,i=e.selectedValue,s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var o=s.find((function(e){return e.props.value===i}));return o?(0,a.cloneElement)(o,{className:(0,r.Z)("margin-top--md",o.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:s.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==i})}))})}function w(e){var t=g(e);return(0,j.jsxs)("div",{className:(0,r.Z)("tabs-container",x.tabList),children:[(0,j.jsx)(b,Object.assign({},t,e)),(0,j.jsx)(v,Object.assign({},t,e))]})}function y(e){var t=(0,m.Z)();return(0,j.jsx)(w,Object.assign({},e,{children:u(e.children)}),String(t))}},71183:(e,t,n)=>{n.d(t,{O2:()=>f,Ey:()=>m,SQ:()=>g});var a=n(67294),r=n(74866),i=n(85162),s=n(74165),o=n(15861),l=n(1841),c=n.n(l),d=n(85893);function u(){return(u=(0,o.Z)((0,s.Z)().mark((function e(t,n,a){var r,i,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=localStorage.getItem(t+"-until"))&&i>Date.now())){e.next=5;break}r=localStorage.getItem(t),e.next=18;break;case 5:return e.prev=5,e.next=8,fetch(t);case 8:return e.next=10,e.sent.text();case 10:r=e.sent,localStorage.setItem(t,r),localStorage.setItem(t+"-until",Date.now()+6e4),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return","Error fetching code, please try reloading");case 18:return o=r.split("\n"),n=n?Number(n)-1:0,a=a?Number(a):o.length,o=o.slice(n,a),l=o.reduce((function(e,t){if(0===t.length)return e;var n=t.match(/^\s+/);return n?Math.min(e,n[0].length):0}),1/0),e.abrupt("return",o.map((function(e){return e.slice(l)})).join("\n"));case 24:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}const h=function(e){var t=e.url,n=e.start,r=e.end,i=e.language,s=e.fname,o=e.metastring,l=(0,a.useState)("Loading..."),h=l[0],p=l[1];return(0,a.useEffect)((function(){var e=function(e){var t=e.slice(e.indexOf("https")).split("#"),n=t[0],a=(t[1],new URL(n).pathname.split("/").slice(1)),r=a[0],i=a[1];return a[2],"https://raw.githubusercontent.com/"+r+"/"+i+"/"+a[3]+"/"+a.slice(4).join("/")}(t),a=function(e,t,n){return u.apply(this,arguments)}(e,n,r);a.then((function(e){return p(e)}))})),(0,d.jsxs)("div",{fname:s,children:[(0,d.jsx)(c(),{language:i,metastring:o+" showLineNumbers",children:h}),(0,d.jsx)("div",{style:{fontSize:"0.9em",fontWeight:600,color:"rgb(14, 117, 221)",textAlign:"center",paddingBottom:"13px",textDecoration:"underline"},children:(0,d.jsx)("a",{href:t,target:"_blank",rel:"noreferrer noopener",children:"See full example on GitHub"})})]})};var p={rust:"\ud83e\udd80 Rust",js:"\ud83c\udf10 Javascript",ts:"\ud83c\udf10 Typescript"};function f(e){var t=e.children;return Array.isArray(t)||(t=[t]),(0,d.jsx)(r.Z,{className:"language-tabs",groupId:"code-tabs",children:t.map((function(e,t){return(0,d.jsx)(i.Z,{value:e.props.value,label:p[e.props.value],children:e})}))})}function g(e){var t=e.children,n=e.language,a=e.showSingleFName;return Array.isArray(t)||(t=[t]),t=t.map((function(e){return function(e,t){var n=e.props,a=(n.children,n.url),r=n.start,i=n.end,s=n.fname;if(e.type===m)return m({url:a,start:r,end:i,language:t,fname:s});return e}(e,n)})),1!=t.length||a?(0,d.jsx)(r.Z,{className:"file-tabs",children:t.map((function(e,t){return(0,d.jsx)(i.Z,{value:t,label:e.props.fname,children:e})}))}):(0,d.jsx)(i.Z,{value:0,label:t[0].props.fname,children:t[0]})}function m(e){var t=e.url,n=e.start,a=e.end,r=e.language,i=e.fname,s=e.metastring;return h({url:t,start:n,end:a,language:r,fname:i,metastring:s})}}}]);